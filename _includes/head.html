{% assign title = site.title %}
{% if page.title %}
    {% assign title = page.title %}
{% elsif page.tag %}
    {% if site.tag_meta[page.tag].title %}
        {% assign title = site.tag_meta[page.tag].title %}
    {% else %}
        {% capture title %}Posts Tagged {{ page.tag }}{% endcapture %}
    {% endif %}
{% endif %}

{% assign description = site.description %}
{% if page.subtitle %}
    {% assign description = page.subtitle %}
{% endif %}
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <title>{{ title }}</title>

    <meta name="author" content="{{ site.author.name }}" />
    <meta name="description" content="{{ description | escape }}">

    <link rel="alternate" type="application/rss+xml" title="{{ site.title }} - {{ site.description }}" href="{{ site.baseurl }}/feed.xml" />

    <!--[if IE]><link rel="shortcut icon" href="/img/favicon.ico"><![endif]-->
    <link rel="apple-touch-icon" type="image/png" href="/img/giving-jar-icon-180.png">
    <link rel="icon" type="image/png" href="/img/giving-jar-icon-196.png">

    {% if page.common-ext-css %}
        {% for css in page.common-ext-css %}
        <link rel="stylesheet" href="{{ css }}" />
        {% endfor %}
    {% endif %}

    {% if page.common-css %}
        {% for css in page.common-css %}
        <link rel="stylesheet" href="{{ css | prepend: site.baseurl | replace: '//', '/' }}" />
        {% endfor %}
    {% endif %}

    {% if page.common-googlefonts %}
        {% for font in page.common-googlefonts %}
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family={{ font }}" />
        {% endfor %}
    {% endif %}

    {% if page.ext-css %}
        {% for css in page.ext-css %}
        <link rel="stylesheet" href="{{ css }}" />
        {% endfor %}
    {% endif %}

    {% if page.css %}
        {% for css in page.css %}
        <link rel="stylesheet" href="{{ css | prepend: site.baseurl | replace: '//', '/' }}" />
        {% endfor %}
    {% endif %}

    {% if page.googlefonts %}
        {% for font in page.googlefonts %}
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family={{ font }}" />
        {% endfor %}
    {% endif %}

    <meta property="article:published_time" content="{{ page.date | date: "%F" }}T00:00:00-00:00" />
    <meta property="article:modified_time" content="{{ page.date | date: "%F" }}T00:00:00-00:00" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="{{ title | strip | strip_newlines | truncate: 70 }}" />
    <meta property="og:url" content="{{ page.url | prepend: site.baseurl | prepend: site.url }}" />
    <meta property="og:description" content="{{ page.snippet | strip_html | strip_newlines | escape | truncate: 200 }}" />
    <meta property="og:site_name" content="{{ site.title }}" />
    <meta property="og:locale" content="en_US" />
    {% if page.preview-image %}
    <meta property="og:image" content="{{ page.preview-image | prepend: site.baseurl | prepend: site.url }}" />
    <link rel="image_src" href="{{ page.preview-image | prepend: site.baseurl | prepend: site.url }}" />
    {% else %}
    <meta property="og:image" content="{{ '/img/giving-jar-icon-196.png' | prepend: site.baseurl | prepend: site.url }}" />
    <link rel="image_src" href="{{ '/img/giving-jar-icon-196.png' | prepend: site.baseurl | prepend: site.url }}" />
    {% endif %}
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@{{ site.author.twitter }}" />
    <meta name="twitter:creator" content="@{{ site.author.twitter }}" />
    <meta name="twitter:description" value="{{ description | escape }}" />
</head>
